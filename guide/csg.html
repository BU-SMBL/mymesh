
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Constructive Solid Geometry &#8212; MyMesh vdev Manual</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/mymesh.css?v=1e1bb860" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=3ce10a4d"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=4ea706d9"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'guide/csg';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="File Input/Output" href="io.html" />
    <link rel="prev" title="Image-based Meshing" href="image_meshing.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="dev" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/mymesh_logo.png" class="logo__image only-light" alt="MyMesh vdev Manual - Home"/>
    <img src="../_static/mymesh_logo.png" class="logo__image only-dark pst-js-only" alt="MyMesh vdev Manual - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../theory.html">
    Theory Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/BU-SMBL/mymesh" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../theory.html">
    Theory Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../dev.html">
    Development
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/BU-SMBL/mymesh" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="what_mesh.html">What is a mesh?</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh_class.html">Working with the <code class="xref py py-class docutils literal notranslate"><span class="pre">mesh</span></code> class</a></li>
<li class="toctree-l1"><a class="reference internal" href="elem_types.html">Element Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="connectivity.html">Connectivity Representations</a></li>
<li class="toctree-l1"><a class="reference internal" href="implicit_meshing.html">Implicit Meshing</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_meshing.html">Image-based Meshing</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Constructive Solid Geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">File Input/Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="ref.html">References</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../guide.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Constructive Solid Geometry</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="constructive-solid-geometry">
<h1>Constructive Solid Geometry<a class="headerlink" href="#constructive-solid-geometry" title="Link to this heading">#</a></h1>
<p>Constructive solid geometry (CSG) is the process of combining a set of initial,
often simple geometries into more complex shapes through the use of boolean
operations such as unions, intersections, and differences <span id="id1">[<a class="reference internal" href="ref.html#id44" title="David H. Laidlaw, W. Benjamin Trumbore, and John F. Hughes. Constructive solid geometry for polyhedral objects. Proceedings of the 13th Annual Conference on Computer Graphics and Interactive Techniques, SIGGRAPH 1986, pages 161–170, aug 1986. URL: https://www.doi.org/10.1145/15922.15904, doi:10.1145/15922.15904.">LTH86</a>]</span>.
In computer graphics applications, this may involve ray tracing or other
approaches for efficient visualization, but MyMesh is primarily concerned with
generating and/or modifying meshes. MyMesh offers two approaches to CSG:
implicit and explicit.</p>
<figure class="align-default">
<img alt="../_images/csg-1_00_00.png" class="plot-directive" src="../_images/csg-1_00_00.png" />
</figure>
<figure class="align-default">
<img alt="../_images/csg-1_01_00.png" class="plot-directive" src="../_images/csg-1_01_00.png" />
</figure>
<section id="implicit-csg">
<h2>Implicit CSG<a class="headerlink" href="#implicit-csg" title="Link to this heading">#</a></h2>
<p>For implicit CSG, boolean operations are performed on implicit functions or a
set of values evaluated at points in a grid or mesh (e.g. image data). Performing
boolean operations in this way is quite efficient, but a contouring step is
required to generate a mesh, which may result in a loss of detail at sharp
features or interfaces. In MyMesh, implicit CSG operations rely on
<a class="reference internal" href="../generated/mymesh.implicit.html#module-mymesh.implicit" title="mymesh.implicit"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mymesh.implicit</span></code></a> and <a class="reference internal" href="../generated/mymesh.contour.html#module-mymesh.contour" title="mymesh.contour"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mymesh.contour</span></code></a>.</p>
<p>Boolean operations can be performed directly on the functions to obtain a new
implicit function. <a class="reference internal" href="../generated/mymesh.implicit.html#module-mymesh.implicit" title="mymesh.implicit"><code class="xref py py-mod docutils literal notranslate"><span class="pre">implicit</span></code></a> offers several sets of boolean
operator functions depending on what type of data is being operated on: arrays
of values (<a class="reference internal" href="../generated/submodules/mymesh.implicit.union.html#mymesh.implicit.union" title="mymesh.implicit.union"><code class="xref py py-func docutils literal notranslate"><span class="pre">union()</span></code></a>, <a class="reference internal" href="../generated/submodules/mymesh.implicit.intersection.html#mymesh.implicit.intersection" title="mymesh.implicit.intersection"><code class="xref py py-func docutils literal notranslate"><span class="pre">intersection()</span></code></a>,
<a class="reference internal" href="../generated/submodules/mymesh.implicit.diff.html#mymesh.implicit.diff" title="mymesh.implicit.diff"><code class="xref py py-func docutils literal notranslate"><span class="pre">diff()</span></code></a>), functions (<a class="reference internal" href="../generated/submodules/mymesh.implicit.unionf.html#mymesh.implicit.unionf" title="mymesh.implicit.unionf"><code class="xref py py-func docutils literal notranslate"><span class="pre">unionf()</span></code></a>,
<a class="reference internal" href="../generated/submodules/mymesh.implicit.intersectionf.html#mymesh.implicit.intersectionf" title="mymesh.implicit.intersectionf"><code class="xref py py-func docutils literal notranslate"><span class="pre">intersectionf()</span></code></a>, <a class="reference internal" href="../generated/submodules/mymesh.implicit.difff.html#mymesh.implicit.difff" title="mymesh.implicit.difff"><code class="xref py py-func docutils literal notranslate"><span class="pre">difff()</span></code></a>), or
sympy-based functions (<a class="reference internal" href="../generated/submodules/mymesh.implicit.unions.html#mymesh.implicit.unions" title="mymesh.implicit.unions"><code class="xref py py-func docutils literal notranslate"><span class="pre">unions()</span></code></a>,
<a class="reference internal" href="../generated/submodules/mymesh.implicit.intersections.html#mymesh.implicit.intersections" title="mymesh.implicit.intersections"><code class="xref py py-func docutils literal notranslate"><span class="pre">intersections()</span></code></a>, <a class="reference internal" href="../generated/submodules/mymesh.implicit.diffs.html#mymesh.implicit.diffs" title="mymesh.implicit.diffs"><code class="xref py py-func docutils literal notranslate"><span class="pre">diffs()</span></code></a>). This
new function can then be meshed as any other implicit function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">func1</span> <span class="o">=</span> <span class="n">implicit</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">,</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">,</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">)</span>
<span class="n">func2</span> <span class="o">=</span> <span class="n">implicit</span><span class="o">.</span><span class="n">sphere</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
<span class="n">func</span> <span class="o">=</span> <span class="n">implicit</span><span class="o">.</span><span class="n">difff</span><span class="p">(</span><span class="n">func1</span><span class="p">,</span> <span class="n">func2</span><span class="p">)</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">implicit</span><span class="o">.</span><span class="n">SurfaceMesh</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="mf">.05</span><span class="p">)</span>
<span class="n">diff</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s1">&#39;trimetric&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/csg-2.png" class="plot-directive" src="../_images/csg-2.png" />
</figure>
<p>While this approach is straight forward and efficient, it suffers from some of
the classic limitations of implicit meshing, particularly, poor resolution along
the sharp edges introduced by the intersection of the two objects (though more
advanced contouring methods can alleviate these).</p>
<p>Another approach is to generate a tetrahedral mesh of the first object and then
contour the second function using the first mesh as a background mesh. Here,
the threshold direction needs to be chosen appropriately to achieve the
intended operation (and a union operations are more difficult to achieve).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">func1</span> <span class="o">=</span> <span class="n">implicit</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">,</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">,</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">)</span>
<span class="n">func2</span> <span class="o">=</span> <span class="n">implicit</span><span class="o">.</span><span class="n">sphere</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cube</span> <span class="o">=</span> <span class="n">implicit</span><span class="o">.</span><span class="n">TetMesh</span><span class="p">(</span><span class="n">func1</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="mf">.05</span><span class="p">)</span>
<span class="n">diff</span> <span class="o">=</span> <span class="n">implicit</span><span class="o">.</span><span class="n">TetMesh</span><span class="p">(</span><span class="n">func2</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="mf">.05</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="n">cube</span><span class="p">,</span> <span class="n">threshold_direction</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">diff</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s1">&#39;trimetric&#39;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/csg-3.png" class="plot-directive" src="../_images/csg-3.png" />
</figure>
<p>This operation can equivalently be performed using the
<a class="reference internal" href="../generated/mymesh.mesh.mesh.Contour.html#mymesh.mesh.mesh.Contour" title="mymesh.mesh.mesh.Contour"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Contour()</span></code></a> method.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">m1</span><span class="o">.</span><span class="n">NodeData</span><span class="p">[</span><span class="s1">&#39;func2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">func2</span><span class="p">(</span><span class="n">m1</span><span class="o">.</span><span class="n">NodeCoords</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">m1</span><span class="o">.</span><span class="n">NodeCoords</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">m1</span><span class="o">.</span><span class="n">NodeCoords</span><span class="p">[:,</span><span class="mi">2</span><span class="p">])</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">m1</span><span class="o">.</span><span class="n">Contour</span><span class="p">(</span><span class="s1">&#39;func2&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">threshold_direction</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Type</span><span class="o">=</span><span class="s1">&#39;vol&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This leads to much cleaner intersection edges between the two objects, however
repeated contouring of a tetrahedral mesh can lead to low quality tetrahedra
that may require improvement if being used for finite element applications.</p>
</section>
<section id="explicit-csg">
<h2>Explicit CSG<a class="headerlink" href="#explicit-csg" title="Link to this heading">#</a></h2>
<p>Explicit CSG operates directly on existing meshes, rather than functions or
values. This involves calculating intersections between meshes (utilizing
<a class="reference internal" href="../generated/mymesh.rays.html#module-mymesh.rays" title="mymesh.rays"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mymesh.rays</span></code></a> and <a class="reference internal" href="../generated/mymesh.tree.html#module-mymesh.tree" title="mymesh.tree"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mymesh.tree</span></code></a>) and then splitting and joining
elements to create the new mesh. These operations are more computationally
demanding and generally slower than implicit CSG, especially for large meshes,
but and can be used when no functional representation of a mesh exists.
Floating point errors in the identification of intersections and
splitting of elements can result in mesh defects and unclosed surfaces, which
may be problematic for some applications. If performing explicit CSG on surface
meshes with the aim of producing models that require volumetric meshes,
<a class="reference external" href="https://github.com/wildmeshing/fTetWild">fTetWild</a> may be useful for
generating high quality tetrahedral meshes from imperfect surfaces
<span id="id2">[<a class="reference internal" href="ref.html#id41" title="Yixin Hu, Teseo Schneider, Bolun Wang, Denis Zorin, and Daniele Panozzo. Fast tetrahedral meshing in the wild. ACM Transactions on Graphics, 39(4):18, 2020. URL: https://www.doi.org/10.1145/3386569.3392385, arXiv:1908.03581, doi:10.1145/3386569.3392385.">HSW+20</a>]</span>. Explicit CSG mesh boolean functions can be found in
<a class="reference internal" href="../generated/mymesh.booleans.html#module-mymesh.booleans" title="mymesh.booleans"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mymesh.booleans</span></code></a>.</p>
<p>Since the vast majority of the computational effort is spent splitting and
labeling elements, which is done identically regardless of which operation is
being performed, <a class="reference internal" href="../generated/submodules/mymesh.booleans.MeshBooleans.html#mymesh.booleans.MeshBooleans" title="mymesh.booleans.MeshBooleans"><code class="xref py py-func docutils literal notranslate"><span class="pre">MeshBooleans()</span></code></a> returns the union,
intersection, and difference meshes together (note that the difference is not
symmetric, i.e. A-B ≠ B-A).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cube</span> <span class="o">=</span> <span class="n">primitives</span><span class="o">.</span><span class="n">Grid</span><span class="p">([</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">,</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">,</span><span class="o">-</span><span class="mf">.9</span><span class="p">,</span><span class="mf">.9</span><span class="p">],</span> <span class="mf">.25</span><span class="p">,</span> <span class="n">Type</span><span class="o">=</span><span class="s1">&#39;surf&#39;</span><span class="p">,</span> <span class="n">ElemType</span><span class="o">=</span><span class="s1">&#39;tri&#39;</span><span class="p">)</span>
<span class="n">sphere</span> <span class="o">=</span> <span class="n">primitives</span><span class="o">.</span><span class="n">Sphere</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ElemType</span><span class="o">=</span><span class="s1">&#39;tri&#39;</span><span class="p">)</span>

<span class="n">U</span><span class="p">,</span><span class="n">I</span><span class="p">,</span><span class="n">D</span> <span class="o">=</span> <span class="n">booleans</span><span class="o">.</span><span class="n">MeshBooleans</span><span class="p">(</span><span class="n">cube</span><span class="p">,</span><span class="n">sphere</span><span class="p">)</span>

<span class="c1"># Plotting:</span>
<span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">U</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">return_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span><span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s1">&#39;trimetric&#39;</span><span class="p">)</span>
<span class="n">fig2</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">I</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">return_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s1">&#39;trimetric&#39;</span><span class="p">)</span>
<span class="n">fig3</span><span class="p">,</span> <span class="n">ax3</span> <span class="o">=</span> <span class="n">D</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">return_fig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">view</span><span class="o">=</span><span class="s1">&#39;trimetric&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig1</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig2</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fig3</span><span class="p">);</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">a3</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">a1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">get_images</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_array</span><span class="p">())</span>
<span class="n">a2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ax2</span><span class="o">.</span><span class="n">get_images</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_array</span><span class="p">())</span>
<span class="n">a3</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">ax3</span><span class="o">.</span><span class="n">get_images</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_array</span><span class="p">())</span>
<span class="n">a1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Union&#39;</span><span class="p">)</span>
<span class="n">a1</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="n">a2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Intersection&#39;</span><span class="p">)</span>
<span class="n">a2</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
<span class="n">a3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Difference&#39;</span><span class="p">)</span>
<span class="n">a3</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default">
<img alt="../_images/csg-4.png" class="plot-directive" src="../_images/csg-4.png" />
</figure>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="image_meshing.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Image-based Meshing</p>
      </div>
    </a>
    <a class="right-next"
       href="io.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">File Input/Output</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implicit-csg">Implicit CSG</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explicit-csg">Explicit CSG</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/guide/csg.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023, Timothy O. Josephson.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>